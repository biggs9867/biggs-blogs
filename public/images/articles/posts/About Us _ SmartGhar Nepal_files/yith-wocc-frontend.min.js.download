/**
 * FRONTEND SCRIPTS
 **/
jQuery(document).ready(function(r){"use strict";var e=r("#yith-wocc-modal"),t=e.find(".yith-wacp-close"),c=r("#yith-wocc-modal-overlay"),d=function(){c.removeClass("open"),e.removeClass("open"),r(document).trigger("yith_wocc_closed_modal")},n=function(){e.css({left:"50%",top:"50%","margin-left":-e.outerWidth()/2,"margin-top":-e.outerHeight()/2})};r(document).on("click",".yith-wocc-activate",function(t){if("undefined"==typeof yith_wocc)return!1;t.preventDefault();var e=r(this);void 0!==r.fn.block&&e.block({message:null,overlayCSS:{background:"#fff no-repeat center",opacity:.5,cursor:"none"}}),r.ajax({url:yith_wocc.ajaxurl,data:{context:"frontend",product_id:e.data("product_id"),is_loop:e.data("is_loop"),action:yith_wocc.action_load,_nonce:yith_wocc.nonce_load},dataType:"html",success:function(t){var o=e.closest(".yith-wocc-wrapper");e.replaceWith(r(t).filter(".yith-wocc-wrapper").html()),o.yith_wocc_init()}})}),r.fn.yith_wocc_init=function(){r(this).addClass("initialized");var t=r(this).find(".yith-wocc-select-address"),o=r(this).find(".yith-wocc-button");o.one("click",function(){r('[name="_yith_wocc_one_click"]').val("is_one_click")}),t.on("change",function(){var a=r(this),t=a.closest(".yith-wocc-wrapper").find(".yith-wocc-button");"add-new"!=a.val()&&t.attr("data-address",a.val()),"add-new"==a.val()&&"undefined"!=typeof yith_wocc_address&&"undefined"!=typeof yith_wocc&&(void 0!==r.fn.perfectScrollbar&&e.find(".woocommerce").perfectScrollbar({suppressScrollX:!0}),n(),e.addClass("open"),c.addClass("open"),e.find("form").on("submit",function(t){t.preventDefault();var c=r(this),n=e.find(".woocommerce"),o=c.serializeArray(),i=c.find('input[type="submit"]');i.prop("disabled",!0),o.push({name:"_nonce",value:yith_wocc_address.action_nonce},{name:"action",value:yith_wocc_address.action_add},{name:"context",value:"frontend"}),void 0!==r.fn.block&&c.block({message:null,overlayCSS:{background:"#fff no-repeat center",opacity:.5,cursor:"none"}}),r.ajax({url:yith_wocc.ajaxurl,data:r.param(o),dataType:"json",success:function(t){var o=r(t.html);if(t.error){var e=c.siblings(".woocommerce-error");e.length?e.replaceWith(o):c.before(o),n.scrollTop(0),n.perfectScrollbar("update")}else a.find("option").remove(),a.append(r(t.html).find("option")),a.val(t.key).trigger("change"),d(),c.trigger("reset");c.unblock(),i.prop("disabled",!1)},error:function(t){c.unblock(),i.prop("disabled",!1)}})}))}),o.on("click",function(){var t=r(this).attr("href"),o=r(this).data("address");t&&void 0!==o&&r(this).prop("href",t+"&_yith_wocc_select_address="+o)}),void 0!==r.fn.select2&&t.select2({placeholder:yith_wocc.select_placeholder}),r(document).on("yith_wocc_closed_modal",function(){"add-new"==t.val()&&(t.val(""),t.trigger("change"))})},r("form.variations_form").on("show_variation",function(t,o,e){e?r(this).find("button.yith-wocc-button").removeClass("disabled"):r(this).find("button.yith-wocc-button").addClass("disabled")}),r("form.variations_form").on("hide_variation",function(t,o,e){r(this).find("button.yith-wocc-button").addClass("disabled")}),r(document).on("click",".yith-wocc-button",function(){r(this).is(".disabled")&&event.preventDefault()}),r(document).find(".yith-wocc-wrapper").each(function(){r(this).yith_wocc_init()}),c.on("click",function(t){t.preventDefault(),d()}),t.on("click",function(t){t.preventDefault(),d()}),r(window).on("resize",n),r(document).on("yith-wcan-ajax-filtered yith_infs_added_elem",function(){r(document).find(".yith-wocc-wrapper:not(.initialized)").each(function(){r(this).yith_wocc_init()})})});