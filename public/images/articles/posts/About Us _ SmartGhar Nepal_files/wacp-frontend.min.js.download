jQuery(document).ready(function(r){"use strict";if("undefined"!=typeof yith_wacp){var a,c=r("#yith-wacp-popup"),t=c.find(".yith-wacp-overlay"),e=c.find(".yith-wacp-close"),n=void 0,o=function(){r("html").removeClass("yith_wacp_open"),c.removeClass("open mini_cart"),setTimeout(function(){a.destroy()},1e3),r(document).trigger("yith_wacp_popup_after_closing")},i=function(){var t=c.find(".yith-wacp-wrapper"),e=r(window).width(),a=r(window).height(),i=e-60>yith_wacp.popup_size.width?yith_wacp.popup_size.width:e-60,n=a-120>yith_wacp.popup_size.height?yith_wacp.popup_size.height:a-120;t.css({left:e/2-i/2,top:a/2-n/2,width:i+"px",height:n+"px"})},p=function(){var t=r("#yith-wacp-mini-cart"),e=r(window).width(),a=r(window).height()*(yith_wacp.mini_cart_position.top/100)-t.innerHeight(),i=e*(yith_wacp.mini_cart_position.left/100)-t.innerWidth();t.css({left:i,top:a}).show()},d=function(t){var e=c.find(".yith-wacp-content");return void 0!==t&&e.html(t),c.hasClass("open")?("undefined"!=typeof PerfectScrollbar&&a.update(),e.scrollTop(0),r(document).trigger("yith_wacp_popup_changed",[c])):(r(document).trigger("yith_wacp_popup_before_opening",[c]),i(),"undefined"!=typeof PerfectScrollbar&&(a=new PerfectScrollbar(".yith-wacp-content",{suppressScrollX:!0})),yith_wacp.is_mobile&&r("html").addClass("yith_wacp_open"),c.addClass("open"),r(document).trigger("yith_wacp_popup_after_opening",[c])),!1},_=function(){void 0!==n&&(c.addClass("mini_cart"),d(n))},h=function(t){r(".yith-wacp-mini-cart-count").length&&r(".yith-wacp-mini-cart-count").html(t)},s=function(t){t.block({message:null,overlayCSS:{background:"#fff url("+yith_wacp.loader+") no-repeat center",opacity:.5,cursor:"none"}})},l=function(t,e,a){r(document).trigger("yith_wacp_adding_cart_single"),a.addClass("loading").removeClass("added"),r.ajax({url:window.location,data:t,contentType:!1,processData:!1,dataType:"json",type:"POST",success:function(t){t.error.length?(e.parents("div.product").before(t.error),r("body, html").animate({scrollTop:0},500),e.find(".gfield input, .gfield textarea, .gfield select ").each(function(){r(this).val()||r(this).closest(".gfield").addClass("gfield_error")})):t.html&&(d(t.html),n=t.cart_html,r(document.body).trigger("wc_fragment_refresh").trigger("wacp_single_added_to_cart"),h(t.items))},complete:function(){a.removeAttr("disabled").removeClass("loading").addClass("added")}})};if(r("body").on("added_to_cart cleverswatch_after_add_to_cart",function(t,e,a,i){void 0===e&&(e=r.parseJSON(sessionStorage.getItem(wc_cart_fragments_params.fragment_name))),void 0!==e.yith_wacp_message&&(yith_wacp.allow_automatic_popup&&d(c.hasClass("mini_cart")?e.yith_wacp_message_cart:e.yith_wacp_message),n=e.yith_wacp_message_cart,h(e.yith_wacp_cart_items))}),r(document).on("yith_wwraq_added_successfully",function(t,e){void 0!==e.yith_wacp_raq&&d(e.yith_wacp_raq)}),c.on("click",".yith-wacp-remove-cart, .item-remove a.remove",function(t){t.preventDefault();var e=r(this),a=e.data("item_key")?e.data("item_key"):function(t,e){var a,i,n=t.split("&");for(i=0;i<n.length;i++)if((a=n[i].split("="))[0]===e)return void 0===a[1]||a[1]}(e.attr("href"),"remove_item"),i={action:yith_wacp.actionRemove,item_key:a,context:"frontend"};s(e.parents("table")),r.ajax({url:yith_wacp.ajaxurl.toString().replace("%%endpoint%%",yith_wacp.actionRemove),data:i,dataType:"json",success:function(t){""!=t.html?(c.find(".yith-wacp-content").html(t.html),r(document).trigger("yith_wacp_popup_changed",[c]),r(document.body).trigger("wc_fragment_refresh")):(r(document.body).trigger("wc_fragment_refresh"),n=void 0,o()),h(t.items),n=t.html}})}),c.on("change","table.cart-list input.qty",function(t){t.preventDefault();var e=r(this),a={action:yith_wacp.actionUpdate,item_key:e.attr("name").replace(/\[|\]|qty/gi,""),qty:e.val(),context:"frontend"};s(e.parents("table")),r.ajax({url:yith_wacp.ajaxurl.toString().replace("%%endpoint%%",yith_wacp.actionUpdate),data:a,dataType:"json",success:function(t){""!=t.html&&(c.find(".yith-wacp-content").html(t.html),r(document).trigger("yith_wacp_popup_changed",[c]),r(document.body).trigger("wc_fragment_refresh")),h(t.items),n=t.html}})}),c.on("click","a.continue-shopping",function(t){"#"==r(this).attr("href")&&(t.preventDefault(),o())}),c.on("submit","#yith-ywraq-form",function(t){t.preventDefault();var e=r(this).serializeArray();e.push({name:"action",value:yith_wacp.actionUpdateRaq},{name:"context",value:"frontend"}),r.ajax({url:yith_wacp.ajaxurl.toString().replace("%%endpoint%%",yith_wacp.actionUpdateRaq),data:r.param(e),dataType:"json",type:"POST",success:function(t){d(t.yith_wacp_raq)}})}),t.on("click",o),e.on("click",function(t){t.preventDefault(),o()}),r(window).on("resize yith_wacp_popup_changed",i),r(document).on("submit",yith_wacp.form_selectors,function(t){if("undefined"!=typeof wc_cart_fragments_params&&yith_wacp.enable_single&&1!==r(this).parents(".product-type-external").length){var e,a=r(this),i=a.find('button[type="submit"]'),n=a.find('input[name="yith-wacp-is-excluded"]'),c="is_one_click"==a.find('input[name="_yith_wocc_one_click"]').val();if(!n.length&&!c){t.preventDefault();var o=new FormData;r.each(a.find("input[type='file']"),function(t,a){r.each(r(a)[0].files,function(t,e){o.append(a.name,e)})});var p=!1;e=a.serializeArray(),r.each(e,function(t,e){"add-to-cart"==e.name&&(p=!0),o.append(e.name,e.value)}),o.append("context","frontend"),o.append("action",yith_wacp.actionAdd),p||o.append("add-to-cart",a.find('button[name="add-to-cart"]').val()),l(o,a,i)}}}),r(document).on("yith_wacp_popup_after_opening yith_wacp_popup_changed",function(){void 0!==r.yith_wccl&&void 0!==r.fn.wc_variation_form&&(r(document).find(".variations_form:not(.initialized)").each(function(){r(this).wc_variation_form()}),r.yith_wccl()),"undefined"!=typeof thb_lazyload&&thb_lazyload.update()}),r(document).on("submit",".yith-wfbt-form",function(t){if(void 0!==yith_wacp.actionAddFBT){t.preventDefault();var e=r(this),a=e.find('button[type="submit"]'),i=new FormData,n=e.serializeArray();r.each(n,function(t,e){i.append(e.name,e.value)}),i.append("context","frontend"),i.append("actionAjax",yith_wacp.actionAddFBT),i.append("action","yith_bought_together"),i.append("_wpnonce",yith_wacp.nonceFBT),l(i,e,a)}}),void 0!==yith_wacp.actionUpdateMiniCart&&r("#yith-wacp-mini-cart").length){r(window).on("resize",p),p(),s(r("#yith-wacp-mini-cart")),r.ajax({url:yith_wacp.ajaxurl.toString().replace("%%endpoint%%",yith_wacp.actionUpdateMiniCart),data:{action:yith_wacp.actionUpdateMiniCart,context:"frontend"},dataType:"json",success:function(t){n=t.html,h(t.items),r(document).on("click",yith_wacp.open_popup_selectors,_)},complete:function(){r("#yith-wacp-mini-cart").unblock()}})}}});