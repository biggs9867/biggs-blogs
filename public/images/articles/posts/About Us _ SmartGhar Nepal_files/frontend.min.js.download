!function(t){var e=t("form.variations_form");t(document).on("click","[data-popup-open]",function(r){if(e.find("button[type=submit]").is(".disabled"))return alert(yith_wcbpg_frontend.select_variation),void r.preventDefault();var a={product_id:jQuery(this).attr("data-id"),variation_id:e.find(".variation_id").val(),action:"yith_wcbpg_set_content_modal",context:"frontend"};t.ajax({type:"POST",data:a,url:yith_wcbpg_frontend.ajaxurl,success:function(e){t("#wcbpg-popup").html(e)},complete:function(){},error:function(){}});var p=jQuery(this).attr("data-popup-open");t('[data-popup="'+p+'"]').fadeIn(350).attr("style","display: block !important"),r.preventDefault()}),t("[data-popup-close]").on("click"),t(document).on("click","[data-popup-close]",function(e){var r=jQuery(this).attr("data-popup-close");t('[data-popup="'+r+'"]').fadeOut(350),t("#wcbpg-popup").empty(),e.preventDefault()}),t(document).click(function(e){0==t(".popup-inner").length||t(e.target).closest(".popup-inner").length||t("[data-popup-close]").trigger("click")});var r=yith_wcbpg_frontend.woocommerce_price_decimal_separator,a=r.charCodeAt(0);t(document).on("keypress","#wcbpg_product_price",function(e){return o=this,(i=(p=e).which?p.which:event.keyCode)==a&&-1==t(o).val().indexOf(r)||!(i<48||i>57)?(t(o).parents(".wrap-input").removeClass("error"),t(o).parent().find(".tooltiptext").remove(),!0):(t(o).parents(".wrap-input").addClass("error"),t(o).parent().append('<span class="tooltiptext">'+yith_wcbpg_frontend.price_tooltip_error_message+"</span>"),!1);var p,o,i}),t(document).on("focusout change",'input:not([type="submit"],#wcbg_product_id)',function(){if(t(this).hasClass("required")&&(""==t(this).val()&&!t(this).is("#wcbpg_gdpr_checkbox")||t(this).is("#wcbpg_gdpr_checkbox")&&!t(this).is(":checked")))t(this).parents(".wrap-input").hasClass("error")||(t(this).parents(".wrap-input").addClass("error"),t(this).attr("placeholder",yith_wcbpg_frontend.required_field));else if(t(this).is("#wcbpg_user_email")){var e=t(this).val();1==p(e)?t(this).parents(".wrap-input").removeClass("error"):t(this).parents(".wrap-input").addClass("error")}else t(this).parents(".wrap-input").hasClass("error")&&t(this).parents(".wrap-input").removeClass("error")});var p=function(t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)};t("form#best-price");t(document).on("submit","form#best-price",function(e){e.preventDefault();var r,a,p=t("#wcbpg-popup");if(1==(r=t(this),a=!1,r.find('input:not([type="submit"])').each(function(){t(this).parents(".wrap-input").hasClass("error")?a=!0:t(this).hasClass("required")&&(""==t(this).val()&&!t(this).is("#wcbpg_gdpr_checkbox")||t(this).is("#wcbpg_gdpr_checkbox")&&!t(this).is(":checked"))&&(t(this).parents(".wrap-input").addClass("error"),a=!0)}),a))alert(yith_wcbpg_frontend.error_fields);else{var o={formData:t(this).serialize(),action:"yith_wcbpg_insert_post",context:"frontend"};block_params={message:null,overlayCSS:{background:"#000",opacity:.6},ignoreIfBlocked:!0},p.block(block_params),t.ajax({type:"POST",data:o,url:yith_wcbpg_frontend.ajaxurl,success:function(e){p.unblock();var r='<div class="wcbpg-success-box">'+yith_wcbpg_frontend.success+'</div><a class="popup-close" data-popup-close="wcbpg-popup" href="#">x</a>',a=p.find(".popup-inner");t(a).fadeOut("slow",function(){t(a).html(r).css("padding","30px").fadeIn("slow")})},complete:function(){},error:function(){alert(yith_wcbpg_frontend.ajaxurl.error)}})}})}(jQuery);